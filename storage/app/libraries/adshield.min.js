AdShield=function(){var d=this;d.urls={};d.UserKey=null;d.AdShieldType=3;var a=function(e,t){if(!t)t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);if(!n)return null;if(!n[2])return"";return decodeURIComponent(n[2].replace(/\+/g," "))};var e=function(e,t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4&&this.status==200){i(this.responseText.toJSON())}};n.open("GET",e,true);var r=JSON.stringify(t);n.send(r)};var t=function(e,t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4&&this.status==200){i(this.responseText.toJSON())}};n.setRequestHeader("Content-Type","application/json");n.open("POST",e,true);var r=JSON.stringify(t);n.send(r)};d.SendStatLog=function(e){var t=document.referrer;var i=encodeURIComponent(t);if(t.indexOf("://")>-1){domain=t.split("/")[2]}else{domain=t.split("/")[0]}domain=domain.split(":")[0];var n=document.location.toString()||"";var r=a("utm_source");var o=a("utm_medium");var s={key:d.UserKey,url:domain,full_url:i,status:e,source:r,sub_source:o,user_agent:navigator.userAgent,visitUrl:n};$.post(d.urls.statlog,s,function(e){})};d.CheckIframed=function(){if(window.top!=window.self){$("a").click(function(){window.open($(this).attr("href"));return false});d.SendStatLog(5);return true}return false};d.CheckReferrerUrl=function(){var e=document.referrer;if(e==""){if(window.top==window.self)d.SendStatLog(7);return}var t=encodeURIComponent(document.referrer);if(e.indexOf("://")>-1){domain=e.split("/")[2]}else{domain=e.split("/")[0]}domain=domain.split(":")[0];var i=a("utm_source");var n=a("utm_medium");var r={key:d.UserKey,url:domain,fullUrl:t,source:i,sub_source:n,user_agent:navigator.userAgent};$.post(d.urls.checkReferrer,r,function(e){switch(e.result){case"{{ ReferrerFilterController::STATUS_SAFE }}":break;case"{{ ReferrerFilterController::STATUS_UNKNOWN }}":break;case"{{ ReferrerFilterController::STATUS_UNSAFE }}":break;default:}},"json")};var i=null;d.StartAdShield=function(){var i="ins.adsbygoogle ins ins, div.advertiseAd, div.redirectAd, div[id^='rcjsload'], div.zergnetAd,iframe[src*='yieldtraffic.com']";var e=d.AdShieldType;if(typeof e!="undefined"){if(e=="0"){return}else{shield_type=e}}var n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);if(shield_type=="1"){var t=i;d.ActivateShieldForAds(n,t)}else if(shield_type=="2"){var r=$(document.createElement("div"));r.css({position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",opacity:"0.0"});r.attr("id",n);$("body").append(r)}else if(shield_type=="3"){d.ClickedMyAd.init({selectors:i,onClick:function(){try{fbq("track","AdClick")}catch(e){}try{dataLayer.push({event:"Adsense Click"})}catch(e){}d.LogAdShieldClick(function(e,t){if(t===0)window.location=""},{ad_type:d.ClickedMyAd.adType,status:d.ClickedMyAd.statusValue})}});d.ClickedMyAd.statusValue=0}else{return}d.SetAdshieldOnClick(n,shield_type);$.post(d.urls.adShieldHandler,{checkip:1,key:d.UserKey},function(e){switch(e.status){case"1":d.ClickedMyAd.statusValue=1;$("div#"+n).remove();break;case"2":if(shield_type=="3"){var t=i;d.ActivateShieldForAds(n,t);d.SetAdshieldOnClick(n,shield_type);d.ClickedMyAd.statusValue=0;d.ClickedMyAd.setClickCatch(true);d.ClickedMyAd.lateShielding=function(e){d.ActivateShieldForAds(n,e);d.SetAdshieldOnClick(n,3)}}break;case"0":window.location="http://redirect.com";break}},"json")};d.SetAdshieldOnClick=function(e,i){$("body").off("click","div#"+e);$("div#"+e).off("click");$("div#"+e).click(function(){d.LogAdShieldClick(function(e,t){if(t===0)window.location="http://redirect.com";if(i=="3"){d.ClickedMyAd.setClickCatch(false);d.ClickedMyAd.statusValue=1}else{}})})};d.LogAdShieldClick=function(t,e){var i=navigator.userAgent;var n=document.referrer;var r=document.location.href;var o=a("utm_medium");var s={key:d.UserKey,userAgent:encodeURIComponent(i),refererUrl:encodeURIComponent(n),targetUrl:encodeURIComponent(r),subsource:o,lgadclk:1};if(typeof e!="undefined"){if(typeof e.ad_type!="undefined")s.ad_type=e.ad_type;if(typeof e.status!="undefined")s.status=e.status}$.post(d.urls.adShieldHandler,s,function(e){t(e.id,e.status)},"json")};d.ActivateShieldForAds=function(o,e){$(e).each(function(e){var t=$(document.createElement("div"));css={position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#000",opacity:"0.0","z-index":"1"};t.css(css);t.attr("id",o);var i=$(this).prop("tagName");if(i=="IFRAME"){$(this).wrap("<div></div>");var n=$(this);var r=n.closest("div");$(r).css({position:"relative"}).append(t)}else{$(this).css({position:"relative"}).append(t)}})};d.ClickedMyAd={overAnAd:false,clickIsHandled:false,statusValue:0,adType:0,selectors:"ins.adsbygoogle ins ins",isMouseMoving:false,onClick:function(){},init:function(e){var t=this;if(typeof e.selectors!="undefined")t.selectors=e.selectors;if(typeof e.onClick!="undefined")t.onClick=e.onClick;$(t.selectors).mouseover(function(){if(t.overAnAd)return;t.overAnAd=true;t.adType=t.getType($(this))}).mouseout(function(){if(t.isMouseMoving)t.overAnAd=false});$(window).blur(function(){if(t.clickIsHandled)return;if(!t.overAnAd)return;t.onClick();t.overAnAd=false}).focus();var i;$(document).mousemove(function(){t.isMouseMoving=true;clearTimeout(i);i=setTimeout(function(){t.isMouseMoving=false},500)})},getType:function(e){var t=e.prop("tagName");var i=typeof e.attr("id")=="undefined"?"":e.attr("id");var n=typeof e.attr("class")=="undefined"?"":e.attr("class");if(t=="INS"){return 0}else if(i.indexOf("rcjsload")>-1){return 1}else if(i.indexOf("revexitunit")>-1){return 1}else if(n.indexOf("advertiseAd")>-1){return 1}else if(n.indexOf("redirectAd")>-1){return 1}else if(n.indexOf("zergnetAd")>-1){return 1}else if(t=="IFRAME"){return 0}else{return 1}return-1},setClickCatch:function(e){this.clickIsHandled=e},addElementToProtect:function(e){var t=this;$(e).mouseover(function(){if(t.overAnAd)return;t.overAnAd=true;t.adType=t.getType($(this))}).mouseout(function(){t.overAnAd=false});$(window).blur(function(){if(t.clickIsHandled)return;if(!t.overAnAd)return;t.onClick();t.overAnAd=false}).focus();t.lateShielding(e)},lateShielding:function(e){}};d.LogCaptcha=function(e,t){$.post(d.urls.adShieldHandler,{key:d.UserKey,logCaptcha:1,log_id:e,status:t},function(e){})};d.FillValue=function(e,t){switch(e){case"key":d.UserKey=t;break}};d.Init=function(){for(var e in _adshield){for(var t in _adshield[e]){d.FillValue(t,_adshield[e][t])}}if(d.UserKey==null){throw{name:"Credential required",message:"Can't find your UserKey. Please follow the instruction on integration from our doc page."}}d.AdShieldType=3;d.CheckIframed();d.CheckReferrerUrl();d.StartAdShield()}};AdShield=new AdShield;