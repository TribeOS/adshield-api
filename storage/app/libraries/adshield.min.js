AdShield=function(){var e=this;e.urls={};e.UserKey=null;e.AdShieldType=3;e.violationId=0;this.Element&&function(e){e.matches=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.msMatchesSelector||function(e){var t=this,n=(t.parentNode||t.document).querySelectorAll(e),i=-1;while(n[++i]&&n[i]!=t);return!!n[i]}}(Element.prototype);this.Element&&function(e){e.closest=e.closest||function(e){var t=this;while(t.matches&&!t.matches(e))t=t.parentNode;return t.matches?t:null}}(Element.prototype);GetParameterByName=function(e,t){if(!t)t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);if(!i)return null;if(!i[2])return"";return decodeURIComponent(i[2].replace(/\+/g," "))};e.httpGet=function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(this.readyState==4&&this.status==200){n(this.responseText.toJSON())}};i.open("GET",e,true);var o=JSON.stringify(t);i.send(o)};e.httpPost=function(e,t,n){var i=new XMLHttpRequest;i.open("POST",e,true);i.addEventListener("load",function(){try{var e=JSON.parse(this.responseText);n(e)}catch(e){n({})}});i.setRequestHeader("Content-Type","application/json");i.send(JSON.stringify(t))};e.SendStatLog=function(t){var n=document.referrer;var i=encodeURIComponent(n);if(n.indexOf("://")>-1){domain=n.split("/")[2]}else{domain=n.split("/")[0]}domain=domain.split(":")[0];var o=document.location.toString()||"";var r=GetParameterByName("utm_source");var a=GetParameterByName("utm_medium");var l={key:e.UserKey,url:domain,full_url:i,status:t,source:r,sub_source:a,user_agent:navigator.userAgent,visitUrl:o};e.httpPost(e.urls.statlog,l,function(e){})};e.CheckIframed=function(){if(window.top!=window.self){document.querySelectorAll("a").forEach(function(e){e.onclick=function(){window.open(e.href);return false}});e.SendStatLog(5);return true}return false};e.CheckReferrerUrl=function(){var t=document.referrer;if(t==""){if(window.top==window.self)e.SendStatLog(7);return}var n=encodeURIComponent(document.referrer);if(t.indexOf("://")>-1){domain=t.split("/")[2]}else{domain=t.split("/")[0]}domain=domain.split(":")[0];var i=GetParameterByName("utm_source");var o=GetParameterByName("utm_medium");var r={key:e.UserKey,url:domain,fullUrl:n,source:i,sub_source:o,user_agent:navigator.userAgent};e.httpPost(e.urls.checkReferrer,r,function(e){switch(e.result){case"{{ ReferrerFilterController::STATUS_SAFE }}":break;case"{{ ReferrerFilterController::STATUS_UNKNOWN }}":break;case"{{ ReferrerFilterController::STATUS_UNSAFE }}":break;default:}},"json")};var t=null;e.StartAdShield=function(){var t="ins.adsbygoogle ins ins, div.advertiseAd, div.redirectAd, div[id^='rcjsload'], div.zergnetAd,iframe[src*='yieldtraffic.com']";var n=e.AdShieldType;if(typeof n!="undefined"){if(n=="0"){return}else{shield_type=n}}var i="as"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);if(shield_type=="1"){var o=t;e.ActivateShieldForAds(i,o)}else if(shield_type=="2"){var r=document.createElement("div");r.style.position="fixed";r.style.top=0;r.style.left=0;r.style.right=0;r.style.bottom=0;r.style.background="#000";r.style.opacity="0.0";r.id=i;document.querySelector("body").appendChild(r)}else if(shield_type=="3"){e.ClickedMyAd.init({selectors:t,onClick:function(){try{fbq("track","AdClick")}catch(e){}try{dataLayer.push({event:"Adsense Click"})}catch(e){}e.LogAdShieldClick(function(e,t){if(t===0)window.location=""},{ad_type:e.ClickedMyAd.adType,status:e.ClickedMyAd.statusValue})}});e.ClickedMyAd.statusValue=0}else{return}e.SetAdshieldOnClick(i,shield_type);e.httpPost(e.urls.adShieldHandler,{checkip:1,key:e.UserKey},function(n){switch(n.status){case"1":e.ClickedMyAd.statusValue=1;document.querySelectorAll("div#"+i).forEach(function(e){e.parentNode.removeChild(e)});break;case"2":if(shield_type=="3"){var o=t;e.ActivateShieldForAds(i,o);e.SetAdshieldOnClick(i,shield_type);e.ClickedMyAd.statusValue=0;e.ClickedMyAd.setClickCatch(true);e.ClickedMyAd.lateShielding=function(t){e.ActivateShieldForAds(i,t);e.SetAdshieldOnClick(i,3)}}break;case"0":window.location="http://redirect.com";break}},"json")};e.SetAdshieldOnClick=function(t,n){document.querySelectorAll("body div#"+t).forEach(function(e){e.removeEventListener("click")});document.querySelectorAll("div#"+t).forEach(function(e){e.removeEventListener("click")});document.querySelectorAll("div#"+t).forEach(function(t){t.click(function(){e.LogAdShieldClick(function(t,i){if(i===0)window.location="http://redirect.com";if(n=="3"){e.ClickedMyAd.setClickCatch(false);e.ClickedMyAd.statusValue=1}else{}})})})};e.RenderCaptcha=function(){};e.LogAdShieldClick=function(t,n){var i=navigator.userAgent;var o=document.referrer;var r=document.location.href;var a=GetParameterByName("utm_medium");var l={key:e.UserKey,userAgent:encodeURIComponent(i),refererUrl:encodeURIComponent(o),targetUrl:encodeURIComponent(r),subsource:a,lgadclk:1};if(typeof n!="undefined"){if(typeof n.ad_type!="undefined")l.ad_type=n.ad_type;if(typeof n.status!="undefined")l.status=n.status}e.httpPost(e.urls.adShieldHandler,l,function(e){t(e.id,e.status)},"json")};e.ActivateShieldForAds=function(e,t){document.querySelectorAll(t).forEach(function(t){var n=document.createElement("div");n.style.position="absolute";n.style.top=0;n.style.left=0;n.style.width="100%";n.style.height="100%";n.style.background="#000";n.style.opacity="0.0";n.style.zIndex="1";n.id=e;var i=t.tagName;if(i=="IFRAME"){var o=document.createElement("div");t.parentNode.insertBefore(o,t);o.appendChild(t);var r=t;var a=r.closest("div");a.style.position="relative";a.appendChild(n)}else{t.style.position="relative";t.appendChild(n)}})};e.ClickedMyAd={overAnAd:false,clickIsHandled:false,statusValue:0,adType:0,selectors:"ins.adsbygoogle ins ins",isMouseMoving:false,onClick:function(){},init:function(e){var t=this;if(typeof e.selectors!="undefined")t.selectors=e.selectors;if(typeof e.onClick!="undefined")t.onClick=e.onClick;document.querySelectorAll(t.selectors).forEach(function(e){e.onmouseover=function(){if(t.overAnAd)return;t.overAnAd=true;t.adType=t.getType(e)};e.onmouseout=function(){if(t.isMouseMoving)t.overAnAd=false}});window.onblur=function(){if(t.clickIsHandled)return;if(!t.overAnAd)return;t.onClick();t.overAnAd=false};window.focus();var n;document.onmousemove=function(){t.isMouseMoving=true;clearTimeout(n);n=setTimeout(function(){t.isMouseMoving=false},500)}},getType:function(e){var t=e.tagName;var n=typeof e.id=="undefined"?"":e.id;var i=typeof e.className=="undefined"?"":e.className;if(t=="INS"){return 0}else if(n.indexOf("rcjsload")>-1){return 1}else if(n.indexOf("revexitunit")>-1){return 1}else if(i.indexOf("advertiseAd")>-1){return 1}else if(i.indexOf("redirectAd")>-1){return 1}else if(i.indexOf("zergnetAd")>-1){return 1}else if(t=="IFRAME"){return 0}else{return 1}return-1},setClickCatch:function(e){this.clickIsHandled=e},addElementToProtect:function(e){var t=this;document.querySelectorAll(e).forEach(function(e){e.onmouseover=function(){if(t.overAnAd)return;t.overAnAd=true;t.adType=t.getType(e)};e.onmouseout=function(){t.overAnAd=false}});window.onblur(function(){if(t.clickIsHandled)return;if(!t.overAnAd)return;t.onClick();t.overAnAd=false});window.focus();t.lateShielding(e)},lateShielding:function(e){}};e.FillValue=function(t,n){switch(t){case"key":e.UserKey=n;break}};e.CheckViolations=function(){var t=document.referrer;var n={refererUrl:t,fullUrl:encodeURIComponent(t),source:GetParameterByName("utm_source"),subsource:GetParameterByName("utm_medium"),visitUrl:"",userAgent:navigator.userAgent,jsCheck:false,badBot:false,isAuto:false};if(t.indexOf("://")>-1){domain=t.split("/")[2]}else{domain=t.split("/")[0]}domain=domain.split(":")[0];n.visitUrl=document.location.toString()||"";try{n.jsCheck=e.checkJSEngine()}catch(e){}try{n.badBot=e.isBadBot()}catch(e){}try{n.isAuto=e.isAuto()}catch(e){}e.httpPost(e.urls.vlog+"/"+e.UserKey,n,function(t){e.ViolationResponse(t)})};e.ViolationResponse=function(t,n){if(t.action=="allow"){e.displayAds()}else if(t.action=="block"){return false}else if(t.action=="captcha"){e.violationId=t.violationId;e.displayCaptcha()}};e.checkJSEngine=function(){if(typeof document=="undefined")return false;if(typeof document.URL=="undefined")return false;if(typeof window=="undefined")return false;if(typeof window.alert=="undefined")return false;if(typeof document.body=="undefined")return false;return true};e.isBadBot=function(){return false};e.displayCaptcha=function(){e.constructCaptcha(function(){e.displayAds()},function(){console.log("not showing ads")})};e.displayAds=function(){console.log("showing ads...")};e.constructCaptcha=function(t,n){var i=document.createElement("div");i.style.top=0;i.style.left=0;i.style.backgroundColor="#000";i.style.opacity=.6;i.style.width="100%";i.style.height="100%";i.style.position="fixed";i.style.zIndex="9999999999999999999999999";document.body.appendChild(i);var o=document.createElement("div");o.style.width="300px";o.style.height="200px";o.style.backgroundColor="#eee";o.style.left="50%";o.style.top="50%";o.style.position="absolute";o.style.transform="translate(-50%, -50%)";o.style.zIndex=i.style.zIndex+"1";o.style.padding="20px";document.body.appendChild(o);var r=document.createElement("div");o.appendChild(r);e.generateCaptcha(r);var a=document.createElement("input");a.type="text";a.style.width="100%";a.style.padding="6px";o.appendChild(a);var l=document.createElement("button");l.textContent="Submit";l.onclick=function(){var n=e.validateCaptcha(a.value);if(n){e.httpPost(e.urls.captchaUrl+"/"+e.UserKey+"/success",{violationId:e.violationId},function(e){t();document.body.removeChild(i);document.body.removeChild(o)})}else{e.httpPost(e.urls.captchaUrl+"/"+e.UserKey+"/failed",{violationId:e.violationId},function(t){e.generateCaptcha(r)})}};o.appendChild(l);var d=document.createElement("button");d.textContent="Refresh";d.onclick=function(){a.value="";e.generateCaptcha(r)};o.appendChild(d);var s=document.createElement("button");s.textContent="Cancel";s.onclick=function(){e.httpPost(e.urls.captchaUrl+"/"+e.UserKey+"/cancelled",{violationId:e.violationId},function(e){document.body.removeChild(i);document.body.removeChild(o);n()})};o.appendChild(s);e.httpPost(e.urls.captchaUrl+"/"+e.UserKey+"/shown",{violationId:e.violationId},function(e){})};e.generateCaptcha=function(t){t.innerHTML="";var n="0123456789abcdefghijkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ";var i=6;var o=[];for(var r=0;r<i;r++){var a=Math.floor(Math.random()*n.length+1);if(o.indexOf(n[a])==-1)o.push(n[a]);else r--}var l=document.createElement("canvas");l.id="captcha";l.width=100;l.height=50;var d=l.getContext("2d");d.font="25px Georgia";d.strokeText(o.join(""),0,30);e.code=o.join("");t.appendChild(l)};e.validateCaptcha=function(t){event.preventDefault();return t==e.code};e.isAuto=function(){if(window.callPhantom||window._phantom)return"PhantomJS";if(/PhantomJS/.test(window.navigator.userAgent))return"PhantomJS";if(!Function.prototype.bind)return"PhantomJS";if(Function.prototype.bind.toString().replace(/bind/g,"Error")!=Error.toString())return"PhantomJS";if(Function.prototype.toString.toString().replace(/toString/g,"Error")!=Error.toString())return"PhantomJS";if(navigator.webdriver==true)return"Selenium";if(window.document.documentElement.getAttribute("webdriver"))return"Selenium";return false};e.Init=function(){for(var t in _adshield){for(var n in _adshield[t]){e.FillValue(n,_adshield[t][n])}}if(e.UserKey==null){throw{name:"Credential required",message:"Can't find your UserKey. Please follow the instruction on integration from our doc page."}}e.AdShieldType=3;e.CheckIframed();e.CheckReferrerUrl();e.CheckViolations()}};AdShield=new AdShield;
//# sourceMappingURL=script.min.js.map